<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Poopi üíò</title>
  <style>
    :root{
      --bg1:#ffe6f2;
      --bg2:#e7f4ff;
      --card:#ffffffcc;
      --ink:#1f2330;
      --pink:#ff4d88;
      --pink2:#ff86b6;
      --shadow: 0 18px 45px rgba(20, 25, 40, .14);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--ink);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background:
        radial-gradient(1200px 700px at 10% 15%, var(--bg2), transparent 55%),
        radial-gradient(1100px 700px at 90% 10%, var(--bg1), transparent 55%),
        linear-gradient(135deg, #fff, #fff);
      overflow:hidden;
    }

    /* floating hearts background */
    .heart{
      position:absolute;
      width:14px;height:14px;
      transform: rotate(45deg);
      background: rgba(255,77,136,.28);
      border-radius: 3px;
      animation: floatUp var(--t) linear infinite;
      left: var(--x);
      bottom: -20px;
      opacity:.8;
      filter: blur(.1px);
      pointer-events:none;
    }
    .heart:before,.heart:after{
      content:"";
      position:absolute;
      width:14px;height:14px;
      background: inherit;
      border-radius:50%;
    }
    .heart:before{left:-7px;top:0}
    .heart:after{left:0;top:-7px}
    @keyframes floatUp{
      0%{ transform: translateY(0) rotate(45deg) scale(var(--s)); opacity:0}
      12%{opacity:.85}
      100%{ transform: translateY(-115vh) rotate(45deg) scale(var(--s)); opacity:0}
    }

    .wrap{ width:min(920px, 92vw); position:relative; z-index:2; }
    .card{
      background:var(--card);
      border:1px solid rgba(255,255,255,.6);
      box-shadow:var(--shadow);
      border-radius:var(--radius);
      padding:26px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      position:relative;
      overflow:hidden;
      transform: translateZ(0);
    }
    .badge{
      display:inline-flex;
      gap:10px;
      align-items:center;
      padding:10px 14px;
      border-radius:999px;
      background: rgba(255, 255, 255, .75);
      border: 1px solid rgba(255, 77, 136, .18);
      font-size:14px;
      user-select:none;
    }
    .tiny{ opacity:.7; font-size:13px; line-height:1.2; }
    .top{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; margin-bottom:12px;
    }
    .grid{
      display:grid;
      grid-template-columns: 1.12fr .88fr;
      gap:16px;
      margin-top:14px;
    }
    @media (max-width: 820px){ .grid{grid-template-columns:1fr} }

    .panel{
      background: rgba(255,255,255,.72);
      border:1px solid rgba(31,35,48,.06);
      border-radius:18px;
      padding:18px;
      position:relative;
      overflow:hidden;
    }
    .title{ font-size:32px; letter-spacing:-.02em; margin:6px 0 8px; }
    .subtitle{ margin:0 0 14px; opacity:.86; line-height:1.55; font-size:15px; }

    .type{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      background: rgba(31,35,48,.06);
      border: 1px dashed rgba(31,35,48,.18);
      border-radius:16px;
      padding:14px;
      min-height:118px;
      line-height:1.55;
      font-size:14px;
      white-space:pre-wrap;
    }

    .ctaRow{
      display:flex; flex-wrap:wrap; gap:12px;
      margin-top:14px; align-items:center;
      position:relative; min-height:54px;
    }
    .btn{
      border:0;
      border-radius:14px;
      padding:12px 14px;
      font-weight:900;
      cursor:pointer;
      transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
      user-select:none;
      position:relative;
      overflow:hidden;
    }
    .btn:active{transform: translateY(1px) scale(.99)}
    .btnPrimary{
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color:white;
      box-shadow: 0 12px 24px rgba(255,77,136,.22);
    }
    /* sparkle ring after YES */
    .btnPrimary.celebrate::after{
      content:"";
      position:absolute; inset:-8px;
      border-radius:18px;
      border:2px solid rgba(255,255,255,.85);
      opacity:0;
      animation: ring 0.8s ease;
      pointer-events:none;
    }
    @keyframes ring{
      0%{transform:scale(.92); opacity:0}
      20%{opacity:1}
      100%{transform:scale(1.12); opacity:0}
    }
    .btnSneaky{
      background: rgba(31,35,48,.06);
      color: var(--ink);
      border: 1px solid rgba(31,35,48,.10);
      font-weight:850;
      box-shadow:none;
      position:absolute;
      right:0; top:0;
      transform: translate(0, 0);
    }

    .divider{ height:1px; background: rgba(31,35,48,.08); margin:14px 0; }
    .miniList{ margin:0; padding-left:18px; font-size:14px; line-height:1.65; opacity:.9; }
    .stamp{
      position:absolute; right:-42px; top:-42px;
      width:170px; height:170px; border-radius: 42px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.75), rgba(255,77,136,.16));
      transform: rotate(18deg);
      pointer-events:none;
    }

    /* intro envelope */
    .intro{ display:flex; align-items:center; justify-content:center; min-height: 210px; text-align:center; }
    .envelope{
      width:200px;height:132px; position:relative; cursor:pointer;
      transform: translateY(0); transition: transform .2s ease;
      margin: 6px auto 0;
    }
    .envelope:hover{transform: translateY(-3px)}
    .envBack{
      position:absolute; inset:0; border-radius:18px;
      background: rgba(255,255,255,.88);
      border: 1px solid rgba(255,77,136,.22);
      box-shadow: 0 18px 40px rgba(20,25,40,.12);
    }
    .envFlap{
      position:absolute; left:0; right:0; top:0; height:66px;
      background: linear-gradient(135deg, rgba(255,77,136,.22), rgba(255,127,179,.12));
      clip-path: polygon(0 0, 100% 0, 50% 100%);
      border-top-left-radius:18px; border-top-right-radius:18px;
    }
    .envNote{
      position:absolute; left:14px; right:14px; bottom:14px; height:64px;
      border-radius:14px;
      background: rgba(255, 231, 241, .9);
      border: 1px solid rgba(255,77,136,.18);
      display:flex; align-items:center; justify-content:center;
      font-weight:1000; letter-spacing:-.01em;
    }

    /* celebration screen */
    .overlay{
      position:fixed; inset:0;
      display:none; align-items:center; justify-content:center;
      padding:18px; z-index:10;
      background: rgba(15,18,25,.55);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .overlay.show{display:flex}
    .modal{
      width:min(820px, 94vw);
      background: rgba(255,255,255,.96);
      border-radius:22px;
      box-shadow: 0 28px 70px rgba(0,0,0,.25);
      padding:22px;
      position:relative;
      overflow:hidden;
    }
    .close{
      position:absolute; right:14px; top:14px;
      border:0; cursor:pointer;
      width:40px;height:40px;border-radius:14px;
      background: rgba(31,35,48,.06);
      font-weight:1000;
    }
    .bigBadge{
      display:inline-flex; gap:10px; align-items:center;
      padding:10px 14px; border-radius:999px;
      background: rgba(255, 77, 136, .10);
      border: 1px solid rgba(255, 77, 136, .22);
      font-weight:1000;
      margin-bottom:12px;
    }

    .memeCard{
      border-radius:18px;
      padding:16px;
      background: rgba(31,35,48,.04);
      border: 1px solid rgba(31,35,48,.08);
      line-height:1.4;
    }
    .memeTitle{ font-weight:1000; margin:0 0 8px; letter-spacing:-.01em; }

    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      opacity:.9;
      white-space:pre-wrap;
      margin:0;
      font-size:13px;
    }
    .progress{
      height:10px; border-radius:999px;
      background: rgba(31,35,48,.08);
      overflow:hidden;
      border: 1px solid rgba(31,35,48,.08);
    }
    .bar{
      height:100%; width:0%;
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      border-radius:999px;
      transition: width .85s ease;
    }

    /* Meme grid (clean, roomy) */
    .memeGrid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
      margin-top:12px;
    }
    @media (max-width: 780px){ .memeGrid{grid-template-columns:1fr} }

    /* Toast */
    .toastWrap{
      position:fixed;
      left:50%; bottom:18px;
      transform: translateX(-50%);
      z-index:11;
      display:flex; flex-direction:column; gap:10px;
      pointer-events:none;
    }
    .toast{
      pointer-events:none;
      background: rgba(255,255,255,.96);
      border: 1px solid rgba(31,35,48,.10);
      border-radius:999px;
      padding:10px 14px;
      box-shadow: 0 18px 40px rgba(0,0,0,.12);
      font-weight:900;
      opacity:0;
      transform: translateY(8px);
      animation: popToast 1.6s ease forwards;
      max-width: 92vw;
      text-align:center;
    }
    @keyframes popToast{
      0%{opacity:0; transform: translateY(10px) scale(.98)}
      15%{opacity:1; transform: translateY(0) scale(1)}
      85%{opacity:1; transform: translateY(0) scale(1)}
      100%{opacity:0; transform: translateY(10px) scale(.98)}
    }

    /* put fireworks ABOVE the modal overlay */
canvas#fxCanvas{
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9999;   /* KEY */
  display: none;
}
canvas#fxCanvas.show{ display:block; }


    /* tiny shake */
    .shake{ animation: shake .35s ease; }
    @keyframes shake{
      0%{transform: translateX(0)}
      20%{transform: translateX(-6px)}
      40%{transform: translateX(6px)}
      60%{transform: translateX(-4px)}
      80%{transform: translateX(4px)}
      100%{transform: translateX(0)}
    }

    /* ===== Date Picker (less tight + nicer result layout) ===== */
    .planGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin-top:10px;
    }
    @media (max-width: 780px){ .planGrid{ grid-template-columns:1fr; } }

    .planBtn{
      border:0;
      border-radius:16px;
      padding:12px 12px;
      cursor:pointer;
      font-weight:950;
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(31,35,48,.10);
      text-align:left;
      transition: transform .12s ease, box-shadow .12s ease;
      line-height:1.3;
    }
    .planBtn:hover{ transform: translateY(-1px); box-shadow: 0 16px 34px rgba(0,0,0,.08); }
    .planBtn:active{ transform: translateY(1px) scale(.99); }

    .planBtn.selected{
      border: 1px solid rgba(255,77,136,.55);
      box-shadow: 0 18px 42px rgba(255,77,136,.18);
      background: linear-gradient(135deg, rgba(255,77,136,.11), rgba(255,134,182,.09), rgba(255,255,255,.92));
    }

    .planResult{
      margin-top:12px;
      border-radius:16px;
      padding:14px;
      background: rgba(255,255,255,.75);
      border: 1px solid rgba(31,35,48,.08);
    }
    .planTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:8px;
    }
    .chosen{
      font-weight:1000;
      letter-spacing:-.01em;
    }
    .approvedBadge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      background: rgba(255,77,136,.12);
      border:1px solid rgba(255,77,136,.22);
      font-weight:1000;
      white-space:nowrap;
      opacity:0;
      transform: translateY(2px) scale(.98);
      transition: opacity .2s ease, transform .2s ease;
    }
    .approvedBadge.show{
      opacity:1;
      transform: translateY(0) scale(1);
    }
    .planResult ul{
      margin:0;
      padding-left:18px;
      line-height:1.6;
      opacity:.92;
      font-weight:850;
      font-size:14px;
    }

    .clickable{ cursor:pointer; user-select:none; }

    /* ===== FULL SCREEN SMOOCH (YES click) ===== */
    .smoochOverlay{
      position:fixed; inset:0;
      z-index:12;
      pointer-events:none;
      display:flex;
      align-items:center;
      justify-content:center;
      background:
        radial-gradient(900px 520px at 50% 45%, rgba(255, 77, 136, .18), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.00), rgba(255, 134, 182, .12), rgba(255,255,255,.00));
      opacity:0;
      animation: smoochFade 2.05s ease forwards;
    }
    @keyframes smoochFade{
      0%{opacity:0}
      10%{opacity:1}
      100%{opacity:0}
    }
    .smoochText{
      font-size:64px;
      font-weight:1000;
      letter-spacing:-.02em;
      transform: translateY(6px) scale(.94);
      opacity:0;
      animation: smoochText 1.05s ease forwards;
      filter: drop-shadow(0 16px 26px rgba(0,0,0,.16));
    }
    @keyframes smoochText{
      0%{opacity:0; transform: translateY(10px) scale(.92) rotate(-2deg)}
      18%{opacity:1; transform: translateY(0) scale(1.03) rotate(2deg)}
      75%{opacity:1; transform: translateY(0) scale(1) rotate(0deg)}
      100%{opacity:0; transform: translateY(-10px) scale(.98)}
    }
    .lip{
      position:absolute;
      font-size:54px;
      opacity:0;
      transform: translate(-50%,-50%) scale(.9) rotate(0deg);
      animation: lipStamp 1.05s ease forwards;
      filter: drop-shadow(0 14px 22px rgba(0,0,0,.14));
    }
    @keyframes lipStamp{
      0%{opacity:0; transform: translate(-50%,-50%) scale(.78) rotate(-10deg)}
      18%{opacity:1; transform: translate(-50%,-50%) scale(1.05) rotate(6deg)}
      70%{opacity:1; transform: translate(-50%,-50%) scale(1) rotate(0deg)}
      100%{opacity:0; transform: translate(-50%,-60%) scale(.98) rotate(0deg)}
    }
  </style>
</head>
<body>
  <canvas id="fxCanvas"></canvas>
  <div id="hearts"></div>
  <div class="toastWrap" id="toastWrap"></div>

  <div class="wrap">
    <div class="card" id="card">
      <div class="stamp" aria-hidden="true"></div>

      <div class="top">
        <div class="badge">üíå <b id="pillText">Poopi ‚Äî open the envelope</b></div>
        <div class="tiny" id="dateText"></div>
      </div>

      <!-- INTRO -->
      <div id="intro" class="intro">
        <div>
          <div class="envelope" id="openEnv" role="button" tabindex="0" aria-label="Open letter">
            <div class="envBack"></div>
            <div class="envFlap"></div>
            <div class="envNote">Open me, Poopi ü•∫</div>
          </div>
          <div class="tiny" style="margin-top:12px;opacity:.8">
            (warning: contains rizz, chaos, and a very unserious boy)
          </div>
        </div>
      </div>

      <!-- MAIN -->
      <div id="main" style="display:none">
        <div class="grid">
          <div class="panel">
            <div class="title">HAI POOPEROONI üíò</div>
            <p class="subtitle">
              I made a website because texting this felt too normal.
              Also‚Ä¶ I felt incredibly romantic for my pretty girl. üòå
            </p>

            <div class="type" id="typebox"></div>

            <div class="ctaRow" id="ctaRow">
              <button class="btn btnPrimary" id="yesBtn">YES. I‚Äôm your Valentine üíò</button>
              <button class="btn btnSneaky" id="noBtn">Nope üòº</button>
            </div>

            <div class="divider"></div>
            <ul class="miniList">
              <li>If you try ‚ÄúNope‚Äù‚Ä¶ you‚Äôll unleash my alpha persistance</li>
              <li>If you click ‚ÄúYES‚Äù‚Ä¶ you‚Äôll unlock my entire heart</li>
              <li>I‚Äôm watching you. üòà</li>
            </ul>
          </div>

          <div class="panel">
            <div class="title" style="font-size:22px;margin-top:2px">Rizzin my princess up pre valentines</div>
            <p class="subtitle" style="margin-bottom:10px">
              Cause I know my rizz makes you smile.
            </p>
            <ul class="miniList" id="facts">
              <li>If you were a stock, I‚Äôm going all-in. No stop loss. </li>
              <li>Are your legs tired? Because as long as I have a face, you‚Äôll have a place to sit. üíò</li>
              <li>I‚Äôm not really into watching sunsets, but I sure would love to watch you go down. üòà</li>
              <li>You must be ice cream because I wanna lick you up. üíò</li>
            </ul>
            <div class="divider"></div>
            <div class="tiny">
              PS: If you‚Äôre smiling right now, don‚Äôt lie to me. I can feel it.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- CELEBRATION MODAL -->
  <div class="overlay" id="overlay">
    <div class="modal">
      <button class="close" id="closeModal">‚úï</button>

      <div class="bigBadge" id="badgeLine">üèÜ Achievement Unlocked: Poopi said YES</div>
      <h2 id="memeHeader" style="margin:6px 0 10px; letter-spacing:-.02em;">Update: you pressed YES üò≠üíò</h2>

      <div class="memeCard" style="margin-bottom:12px;">
        <p class="memeTitle" style="margin:0 0 8px;">Live reaction:</p>
        <pre class="mono clickable" id="asciiFace">Aakash.exe has stopped working
Reason: BABYBOO TOO CUTE
Attempting reboot... ‚úÖ</pre>

        <div style="margin-top:12px;">
          <div class="tiny" style="margin-bottom:6px;opacity:.75">Downloading kisses‚Ä¶</div>
          <div class="progress"><div class="bar" id="bar"></div></div>
        </div>
      </div>

      <div class="memeGrid" id="memeGrid"></div>

      <div class="memeCard" id="dateCard" style="margin-top:12px;">
        <div class="memeTitle">Alright my Girlfrien‚Ä¶ what Saturday LDR date we doing? üòº</div>

        <div class="planGrid">
          <button class="planBtn" data-plan="dinner">üçú Dinner date (we nomnom like NPCs together)</button>
          <button class="planBtn" data-plan="movie">üé¨ Movie night (watch-party and u get live commentary)</button>
          <button class="planBtn" data-plan="games">üéÆ Games night (winner gets kisses, aka ME)</button>
          <button class="planBtn" data-plan="playlist">üéß Playlist date (get me preggo üòº)</button>
          <button class="planBtn" data-plan="roulette">üé≤ Surprise me ‚Äî roulette picks for you (and you can‚Äôt complain)</button>
        </div>

        <div class="planResult" id="planResult">
          <div class="planTop">
            <div class="chosen" id="chosenLine">Pick one, Mommy. I‚Äôll plan it, u just show up with ur breathtakingly beautiful face. ‚úÖ</div>
            <div class="approvedBadge" id="approvedBadge">GIRLFRIEN APPROVED WOOOOOOO</div>
          </div>
          <ul id="planBullets">
            <li>Just call dates this year cause of fuckass LDR but ima make up for it</li>
            <li>cant wait to spend ‚àû valentines w you baby </li>
          </ul>
        </div>
      </div>

      <div class="divider"></div>
      <p class="tiny" style="margin:0;opacity:.75">
        I LOVE YOU SOSOSOSOSOSOSOOSOSOSOSOSOSOSO MUCH
      </p>
    </div>
  </div>

  <script>
    // Names
    const HER_NAME = "Devi";
    const NICKNAME = "Poopi";
    const YOUR_NAME = "Aakash";

    // Date
    document.getElementById("dateText").textContent = new Date().toLocaleDateString(undefined, {
      weekday:'long', year:'numeric', month:'long', day:'numeric'
    });

    // Background hearts
    const hearts = document.getElementById("hearts");
    for(let i=0;i<28;i++){
      const h = document.createElement("div");
      h.className="heart";
      h.style.setProperty("--x", Math.floor(Math.random()*100)+"vw");
      h.style.setProperty("--t", (6+Math.random()*8).toFixed(2)+"s");
      h.style.setProperty("--s", (0.6+Math.random()*1.4).toFixed(2));
      h.style.background = `rgba(255,77,136,${(0.16+Math.random()*0.35).toFixed(2)})`;
      h.style.animationDelay = (-Math.random()*10).toFixed(2)+"s";
      hearts.appendChild(h);
    }

    // Toasts
    const toastWrap = document.getElementById("toastWrap");
    function toast(text){
      const t = document.createElement("div");
      t.className = "toast";
      t.textContent = text;
      toastWrap.appendChild(t);
      setTimeout(()=> t.remove(), 1700);
    }

    // Intro -> main
    const intro = document.getElementById("intro");
    const main = document.getElementById("main");
    const openEnv = document.getElementById("openEnv");
    const pillText = document.getElementById("pillText");

    function openLetter(){
      intro.style.display="none";
      main.style.display="block";
      pillText.textContent = `${NICKNAME}, welcome to the rizz department`;
      startTyping();
    }
    openEnv.addEventListener("click", openLetter);
    openEnv.addEventListener("keydown", (e)=>{ if(e.key==="Enter"||e.key===" ") openLetter(); });

    // Typewriter
    const typebox = document.getElementById("typebox");
    const messageLines = [
      `Dearest ${NICKNAME},`,
      ``,
      `I have an announcement:`,
      `‚Ä¢ you‚Äôre MY prettiest lil princess`,
      `‚Ä¢ I miss you so frickin much (screw ldr)`,
      `‚Ä¢ I made a website cause i couldn't stop thinking about u`,
      ``,
      `So ${HER_NAME}‚Ä¶ be my Valentine? üíò`,
      ``,
      `Don't even try pressing nope (you can try üòâ)`,
      `because you‚Äôre way too adorable to not be mine.`,
      ``,
      `‚Äî YOUR MANZIE (your favorite headache)`
    ];

    let typing = false;
    function startTyping(){
      if(typing) return;
      typing = true;
      typebox.textContent = "";
      const full = messageLines.join("\n");
      let i=0;
      const speed = 16;
      const tick = () => {
        typebox.textContent = full.slice(0,i);
        i++;
        if(i<=full.length) setTimeout(tick, speed);
        else typing=false;
      };
      tick();
    }

    /* =========================
       FX CANVAS (Fireworks + Confetti)
    ========================== */
    const canvas = document.getElementById("fxCanvas");
    const ctx = canvas.getContext("2d");
    function resize(){
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resize);
    resize();

    let particles = [];
    let fxRunning = false;

    function startFX(){
      if(fxRunning) return;
      fxRunning = true;
      canvas.classList.add("show");

      const step = ()=>{
        ctx.clearRect(0,0,canvas.width,canvas.height);

        // update
        for(const p of particles){
          p.life++;
          p.x += p.vx;
          p.y += p.vy;

          // gravity + drag
          p.vx *= p.drag;
          p.vy *= p.drag;
          p.vy += p.g;

          const a = Math.max(0, 1 - (p.life / p.max));
          ctx.save();
          ctx.globalAlpha = a;
          ctx.fillStyle = p.color;

          if(p.shape === "rect"){
            ctx.translate(p.x, p.y);
            ctx.rotate(p.rot);
            ctx.fillRect(-p.r, -p.r, p.r*2.2, p.r*1.3);
          }else{
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
            ctx.fill();
          }
          ctx.restore();
        }

        particles = particles.filter(p => p.life < p.max && p.y < canvas.height + 80);

        if(particles.length){
          requestAnimationFrame(step);
        }else{
          fxRunning = false;
          canvas.classList.remove("show");
        }
      };

      requestAnimationFrame(step);
    }

    function addConfettiBurst(x, y, count=140){
      for(let i=0;i<count;i++){
        const hue = 320 + Math.random()*60;
        const a = Math.random()*Math.PI*2;
        const sp = 2.5 + Math.random()*6.2;
        particles.push({
          shape:"rect",
          x, y,
          vx: Math.cos(a)*sp,
          vy: Math.sin(a)*sp - 2.0,
          g: 0.08,
          drag: 0.985,
          r: 3 + Math.random()*4,
          rot: Math.random()*Math.PI,
          life: 0,
          max: 85 + Math.random()*70,
          color: `hsla(${hue}, 90%, 70%, 1)`
        });
      }
      startFX();
    }

    function addFirework(x, y, count=90){
      const hue = 320 + Math.random()*60;
      for(let i=0;i<count;i++){
        const a = Math.random()*Math.PI*2;
        const sp = 1.7 + Math.random()*5.6;
        particles.push({
          shape:"dot",
          x, y,
          vx: Math.cos(a)*sp,
          vy: Math.sin(a)*sp,
          g: 0.06,
          drag: 0.985,
          r: 2.2,
          rot: 0,
          life: 0,
          max: 55 + Math.random()*35,
          color: `hsla(${hue}, 95%, 70%, 1)`
        });
      }
      startFX();
    }

    function fireworksOverElement(el){
      const r = el.getBoundingClientRect();
      const x = r.left + r.width/2;
      const y = r.top - 14;                 // above the button
      // 3 quick bursts "over the YES box"
      addFirework(x, y, 95);
      setTimeout(()=> addFirework(x - 90, y - 30, 85), 120);
      setTimeout(()=> addFirework(x + 90, y - 30, 85), 240);
    }

    /* =========================
       FULL SCREEN SMOOCH (YES)
    ========================== */
    function smoochScreen(){
      const o = document.createElement("div");
      o.className = "smoochOverlay";

      const txt = document.createElement("div");
      txt.className = "smoochText";
      txt.textContent = "MWAHHH üíã";
      o.appendChild(txt);

      // stamp lipstick marks around the screen
      const stamps = 10;
      for(let i=0;i<stamps;i++){
        const lip = document.createElement("div");
        lip.className = "lip";
        lip.textContent = (Math.random()<0.5) ? "üíã" : "üòò";
        const px = 10 + Math.random()*80;
        const py = 18 + Math.random()*70;
        lip.style.left = px + "vw";
        lip.style.top  = py + "vh";
        lip.style.animationDelay = (i*0.03).toFixed(2) + "s";
        o.appendChild(lip);
      }

      document.body.appendChild(o);
      setTimeout(()=> o.remove(), 1100);
    }

    /* =========================
       MODAL / MEMES
    ========================== */
    const overlay = document.getElementById("overlay");
    const closeModal = document.getElementById("closeModal");
    const memeGrid = document.getElementById("memeGrid");
    const memeHeader = document.getElementById("memeHeader");
    const asciiFace = document.getElementById("asciiFace");
    const badgeLine = document.getElementById("badgeLine");
    const bar = document.getElementById("bar");
    const card = document.getElementById("card");

    function showModal(){ overlay.classList.add("show"); }
    function hideModal(){ overlay.classList.remove("show"); }
    closeModal.addEventListener("click", hideModal);
    overlay.addEventListener("click", (e)=>{ if(e.target === overlay) hideModal(); });

    const memeHeaders = [
      "Update: you pressed YES üò≠üíò",
      "Official announcement: Girlfrien secured ‚úÖ",
      "Alert: I‚Äôm smiling like an idiot ü´†",
      "Breaking: I miss you. Come here."
    ];

    const asciiOptions = [
`System Log:
> user: ${NICKNAME}
> action: clicked YES
> result: Aakash smiling like an idiot ‚úÖ`,
`ALERT üö®
Status: MINE FOREVER üíÄ`,
`Girlfrien UPDATE:
‚Ä¢ adorable ‚úÖ
‚Ä¢ dangerously gorgeous ‚úÖ
‚Ä¢ my valentine ‚úÖ
Conclusion: me = happiest boi in the universe.`
    ];

    // kept ONLY 2 boxes (clean)
    const memeCards = [
      {t:"Kiss delivery ETA", b:"Calculating‚Ä¶\nRoute: straight to your forehead\nETA: ASAP üíã"},
      {t:"Distance rn", b:"üìç India\nüìç Me\nüß≤ still pulling you closer"},
      {t:"Me pretending I‚Äôm chill", b:"üòê\n(inside: screaming + blushing + doing backflips)"}
    ];

    function buildMemes(){
      memeGrid.innerHTML = "";

      // pick 2
      const pool = [...memeCards].sort(()=>Math.random()-0.5).slice(0,2);
      pool.forEach(c=>{
        const el = document.createElement("div");
        el.className = "memeCard";
        el.innerHTML = `
          <div class="memeTitle">${c.t}</div>
          <pre class="mono">${c.b}</pre>
        `;
        memeGrid.appendChild(el);
      });

      memeHeader.textContent = memeHeaders[Math.floor(Math.random()*memeHeaders.length)];
      asciiFace.textContent = asciiOptions[Math.floor(Math.random()*asciiOptions.length)];
      badgeLine.textContent = `üèÜ Achievement Unlocked: POOPEROONI said YES`;
      bar.style.width = "0%";
      setTimeout(()=> bar.style.width = "100%", 120);

      resetDatePicker();
    }

    const yesBtn = document.getElementById("yesBtn");
    yesBtn.addEventListener("click", ()=>{
      yesBtn.classList.add("celebrate");
      setTimeout(()=> yesBtn.classList.remove("celebrate"), 850);

      smoochScreen();                 // full-screen kiss
      fireworksOverElement(yesBtn);   // fireworks OVER the YES button
      addConfettiBurst(
        yesBtn.getBoundingClientRect().left + yesBtn.getBoundingClientRect().width/2,
        yesBtn.getBoundingClientRect().top + yesBtn.getBoundingClientRect().height/2,
        150
      );

      buildMemes();
      showModal();
      toast("OKAYYYYY POOPI üíò");
    });

    // Click ASCII for extra reactions
    let asciiIndex = 0;
    asciiFace.addEventListener("click", ()=>{
      asciiIndex = (asciiIndex + 1) % asciiOptions.length;
      asciiFace.textContent = asciiOptions[asciiIndex];
      toast("STOP POKING ME üò≠");
    });

    /* =========================
       NOPE surprises
    ========================== */
    const noBtn = document.getElementById("noBtn");
    const ctaRow = document.getElementById("ctaRow");

    const nopeToasts = [
      "Nope clicked? lol your finger slipped üò≠",
      "Try again Babe üòº (you won‚Äôt)",
      "Access denied: too cute to reject ‚ùå",
      "Nice attempt. I‚Äôm still your valentine btw.",
      "You clicked Nope and got‚Ä¶ NOTHING. Except love.",
      "This button is for comedy purposes only."
    ];

    function teleportNope(){
      const rect = ctaRow.getBoundingClientRect();
      const maxX = Math.max(0, rect.width - noBtn.offsetWidth);
      const maxY = 36;
      const x = Math.random() * maxX;
      const y = Math.random() * maxY;
      noBtn.style.transform = `translate(${x}px, ${y}px) rotate(${(-6 + Math.random()*12).toFixed(1)}deg)`;
    }

    function fireMiniHearts(n=10){
      for(let i=0;i<n;i++){
        const h = document.createElement("div");
        h.className="heart";
        h.style.setProperty("--x", Math.floor(30+Math.random()*40)+"vw");
        h.style.setProperty("--t", (2.8+Math.random()*2.2).toFixed(2)+"s");
        h.style.setProperty("--s", (0.9+Math.random()*1.2).toFixed(2));
        h.style.background = `rgba(255,77,136,${(0.25+Math.random()*0.35).toFixed(2)})`;
        h.style.animationDelay = "0s";
        hearts.appendChild(h);
        setTimeout(()=> h.remove(), 3400);
      }
    }

    function surprise(){
      const roll = Math.floor(Math.random()*6);
      if(roll === 0){
        toast(nopeToasts[Math.floor(Math.random()*nopeToasts.length)]);
        teleportNope();
      } else if(roll === 1){
        toast("Plot twist: you‚Äôre my girlfrien üíò");
        card.classList.add("shake");
        setTimeout(()=> card.classList.remove("shake"), 380);
        teleportNope();
      } else if(roll === 2){
        toast("üíã *forehead kiss applied*");
        fireMiniHearts(8);
        teleportNope();
      } else if(roll === 3){
        toast("stop touching no, come touch me ‚úÖ");
        noBtn.textContent = "Nope üòº (sus)";
        teleportNope();
      } else if(roll === 4){
        toast("You thought you‚Äôd click Nope? I thought you were smart üò≠");
        fireMiniHearts(10);
        teleportNope();
      } else {
        toast("Fine. Click it. (It still won‚Äôt do anything) üòå");
        teleportNope();
      }

      clearTimeout(noBtn._resetTimer);
      noBtn._resetTimer = setTimeout(()=>{
        noBtn.textContent = "Nope üòº";
        noBtn.style.transform = "translate(0,0) rotate(0deg)";
      }, 900);
    }

    noBtn.addEventListener("pointerdown", (e)=>{ e.preventDefault(); surprise(); });
    noBtn.addEventListener("mouseenter", ()=>{ if (Math.random() < 0.55) surprise(); });

    /* =========================
       DATE PICKER (clean result)
    ========================== */
    const planBtns = Array.from(document.querySelectorAll(".planBtn"));
    const chosenLine = document.getElementById("chosenLine");
    const approvedBadge = document.getElementById("approvedBadge");
    const planBullets = document.getElementById("planBullets");

    const plans = {
      dinner: {
        title: "‚úÖ Chosen: Dinner date",
        bullets: [
          "Same time We both eating like fatasses together.",,
          "Bonus: I owe you a 10 million kiss. Non-negotiable."
        ]
      },
      movie: {
        title: "‚úÖ Chosen: Movie night",
        bullets: [
          "Intermission: kiss break üíã",
          "We pick the movie together so nobody gets cranky."
        ]
      },
      games: {
        title: "‚úÖ Chosen: Games night",
        bullets: [
          "winner gets kisses.",
          "Loser also gets kisses (can't leave u kissless)",
          "I will 100% accuse you of cheating. Respectfully."
        ]
      },
      playlist: {
        title: "‚úÖ Chosen: Playlist date",
        bullets: [
          "Add 10 songs each.",
          "Cute Q&A sesh :)"
        ]
      }
    };

    function resetDatePicker(){
      planBtns.forEach(b=> b.classList.remove("selected"));
      approvedBadge.classList.remove("show");
      chosenLine.textContent = "Pick one, Poopi. I‚Äôll plan it, u just pull up with your pretty ass";
      planBullets.innerHTML = `
        <li>Just call dates this year cause of fuckass LDR but ima make up for it</li>
        <li>cant wait to spend ‚àû valentines w you baby </li>
      `;
    }

    function choosePlan(key){
      planBtns.forEach(b=> b.classList.remove("selected"));
      const btn = planBtns.find(b => b.dataset.plan === key);
      if(btn) btn.classList.add("selected");

      fireworksOverElement(btn);

      approvedBadge.classList.add("show");
      chosenLine.textContent = plans[key].title;
      planBullets.innerHTML = plans[key].bullets.map(x=>`<li>${x}</li>`).join("");

      // fireworks when she chooses a date (proper bursts)
      const r = btn.getBoundingClientRect();
      const x = r.left + r.width/2;
      const y = r.top + r.height/2;
      addFirework(x, y - 10, 95);
      setTimeout(()=> addFirework(x - 120, y - 50, 85), 120);
      setTimeout(()=> addFirework(x + 120, y - 50, 85), 240);

      fireMiniHearts(12);
      toast("Okay Girlfrien ‚úÖ");
    }

    function roulettePick(){
      const keys = ["dinner","movie","games","playlist"];
      toast("Roulette spinning‚Ä¶ üé≤");
      setTimeout(()=>{
        const pick = keys[Math.floor(Math.random()*keys.length)];
        toast("Chosen. üòº");
        choosePlan(pick);
      }, 650);
    }

    planBtns.forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const key = btn.dataset.plan;
        if(key === "roulette") roulettePick();
        else choosePlan(key);
      });
    });
/* ========= FIREWORKS (drop-in) ========= */
const fxCanvas = document.getElementById("fxCanvas");
const fxCtx = fxCanvas.getContext("2d");
let fwParticles = [];
let fwAnimating = false;

function fwResize(){
  const dpr = window.devicePixelRatio || 1;
  fxCanvas.width  = Math.floor(window.innerWidth * dpr);
  fxCanvas.height = Math.floor(window.innerHeight * dpr);
  fxCanvas.style.width = window.innerWidth + "px";
  fxCanvas.style.height = window.innerHeight + "px";
  fxCtx.setTransform(dpr, 0, 0, dpr, 0, 0); // draw in CSS pixels
}
window.addEventListener("resize", fwResize);
fwResize();

function fwBurst(x, y, count = 90){
  const hue = 320 + Math.random()*60;
  for(let i=0;i<count;i++){
    const a = Math.random() * Math.PI * 2;
    const sp = 1.8 + Math.random() * 5.8;
    fwParticles.push({
      x, y,
      vx: Math.cos(a)*sp,
      vy: Math.sin(a)*sp,
      life: 0,
      max: 55 + Math.random()*40,
      r: 2 + Math.random()*1.5,
      hue
    });
  }
}

function fireworksAt(x, y){
  fxCanvas.classList.add("show");

  // do 3 bursts so it feels ‚Äúproper‚Äù
  fwBurst(x, y, 95);
  setTimeout(()=> fwBurst(x - 120, y - 60, 85), 120);
  setTimeout(()=> fwBurst(x + 120, y - 60, 85), 120);
  setTimeout(()=> fwBurst(x, y - 120, 70), 240);

  if(!fwAnimating){
    fwAnimating = true;
    const start = performance.now();

    const tick = (t)=>{
      fxCtx.clearRect(0,0,window.innerWidth,window.innerHeight);

      for(const p of fwParticles){
        p.life++;
        p.x += p.vx;
        p.y += p.vy;
        p.vy += 0.06;    // gravity
        p.vx *= 0.985;   // drag
        p.vy *= 0.985;

        const a = Math.max(0, 1 - p.life/p.max);
        fxCtx.save();
        fxCtx.globalAlpha = a;
        fxCtx.fillStyle = `hsla(${p.hue}, 95%, 70%, 1)`;
        fxCtx.beginPath();
        fxCtx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        fxCtx.fill();
        fxCtx.restore();
      }

      fwParticles = fwParticles.filter(p => p.life < p.max && p.y < window.innerHeight + 80);

      // stop after ~1.2s or when empty
      if(fwParticles.length && (t - start) < 1200){
        requestAnimationFrame(tick);
      }else{
        fwAnimating = false;
        fxCanvas.classList.remove("show");
      }
    };

    requestAnimationFrame(tick);
  }
}

/* helper: fireworks over a clicked button */
function fireworksOverElement(el){
  const r = el.getBoundingClientRect();
  fireworksAt(r.left + r.width/2, r.top + r.height/2);
}

    // init
    resetDatePicker();
  </script>
</body>
</html>
